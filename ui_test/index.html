<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Human-in-the-Loop Chat Test</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Human-in-the-Loop Chat Test</h1>
        <div class="settings">
          <label for="api-url">API URL:</label>
          <input type="text" id="api-url" value="http://localhost:8000" />
          <label for="human-toggle">
            <input type="checkbox" id="human-toggle" checked />
            Enable Human-in-the-Loop
          </label>
          <button id="check-pending" class="debug-button">
            Check Pending Interactions
          </button>
          <button id="history-toggle" class="debug-button">
            Interaction History
          </button>
        </div>
      </header>

      <div class="chat-container">
        <div id="interaction-history-panel" class="interaction-history-panel">
          <div class="panel-header">
            <h3>Interaction History</h3>
            <button class="close-button">&times;</button>
          </div>
          <div id="interaction-history-list" class="history-list"></div>
        </div>

        <div id="chat-messages" class="chat-messages"></div>

        <div class="human-input-panel" id="human-input-panel">
          <h3>Human Input Requested</h3>
          <p id="human-question">Question will appear here...</p>
          <textarea
            id="human-answer"
            placeholder="Type your answer here..."
          ></textarea>
          <button id="submit-human-input">Submit Response</button>
        </div>

        <div class="input-area">
          <textarea
            id="user-input"
            placeholder="Type a message that might require human judgment..."
          ></textarea>
          <button id="send-button">Send</button>
        </div>
      </div>

      <div class="status-panel">
        <div class="panel-header">
          <h3>Connection Status</h3>
          <div id="connection-status">Disconnected</div>
        </div>

        <div class="debug-info">
          <h3>Session Information</h3>
          <div class="debug-grid">
            <div class="debug-field">
              <span>Session ID:</span>
              <span id="session-id">Initializing...</span>
            </div>
            <div class="debug-field">
              <span>Thread ID:</span>
              <span id="thread-id">None</span>
            </div>
            <div class="debug-field">
              <span>Current Interaction ID:</span>
              <span id="interaction-id">None</span>
            </div>
          </div>
        </div>

        <div class="debug-info">
          <h3>Interaction Details</h3>
          <div id="interaction-details" class="interaction-details">
            <p>No interaction selected</p>
          </div>
        </div>

        <div class="debug-info">
          <h3>Human-in-the-Loop Status</h3>
          <div class="debug-grid">
            <div class="debug-field">
              <span>Marker Found:</span>
              <span id="marker-status">No</span>
            </div>
            <div class="debug-field">
              <span>Event Received:</span>
              <span id="event-status">No</span>
            </div>
            <div class="debug-field">
              <span>Current Interaction ID:</span>
              <span id="interaction-id">None</span>
            </div>
            <div class="debug-field">
              <span>Event Flow:</span>
              <span id="event-flow-status">Waiting</span>
            </div>
          </div>

          <div class="debug-actions">
            <button id="check-pending" class="debug-button">
              Check Pending
            </button>
            <button id="toggle-debug" class="debug-button">
              Show Raw Events
            </button>
          </div>
        </div>

        <div class="event-log-container">
          <div class="event-log-header">
            <h3>Event Log</h3>
            <button id="clear-log" class="debug-button small">Clear</button>
          </div>
          <div id="event-log"></div>
        </div>
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>
